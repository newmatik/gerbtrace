---
title: Release Process
description: Version bumps, tag-based releases, CI/CD workflows, updater signing, and verification.
---

# Release Process

Releases follow a tag-based workflow with automated CI/CD for web deployment and desktop builds.

## Version bump

Update the version in all four files:

1. `package.json` – `"version"`
2. `src-tauri/tauri.conf.json` – `"version"`
3. `src-tauri/Cargo.toml` – `version`
4. `nuxt.config.ts` – `runtimeConfig.public.appVersion`

All four must match for the release to be consistent.

## Tag and release

```bash
# Commit the version bump
git add -A && git commit -m "bump version to v1.x.x"

# Create and push a version tag
git tag v1.x.x
git push origin v1.x.x
```

GitHub Actions automatically builds macOS and Windows installers and creates a GitHub Release when a `v*` tag is pushed.

## Release notes

Every release includes short, user-oriented release notes on the [GitHub Releases](https://github.com/newmatik/gerbtrace/releases) page. Guidelines:

- Use the bare version number as the release title (e.g., `v1.1.1`)
- Use a flat bullet list with concise sentences
- Focus on new features and bug fixes that affect users
- No emojis, no internal details, no auto-generated contributor lists

The same text appears in the desktop app's "What's New" dialog after an auto-update.

## CI/CD workflows

| Workflow | Trigger | Action |
|---|---|---|
| `ci.yml` | Pull request to `main` | Type check + build verification |
| `deploy.yml` | Push to `main` | Deploy web app to DigitalOcean Spaces |
| `deploy-supabase.yml` | Push to `main` (changes in `supabase/**`) | Deploy migrations + edge functions to droplet |
| `build-desktop.yml` | Tag push (`v*`) | Build macOS/Windows apps + create GitHub Release |

### Web deployment

Triggered on every push to `main` (ignores `supabase/**` and `src-tauri/**` changes):

1. `npm ci` and `nuxt generate` with environment variables
2. Upload `.output/public/` to DigitalOcean Spaces with `public-read` ACL
3. Optional CDN cache purge

### Desktop release

Triggered on `v*` tag push:

1. Matrix build for macOS (universal binary) and Windows
2. macOS: Apple certificate import, keychain setup, notarization
3. Windows: standard build
4. Creates GitHub Release with installers and `latest.json` for the updater
5. Signs updater artifacts with the Tauri signing key

### API deployment

Triggered on push to `main` when `supabase/**` files change:

1. Archive migrations and functions
2. Upload to droplet via SCP
3. Apply migrations in timestamp order (idempotent, skips already-applied)
4. Sync edge functions and restart the functions service

## Updater signing

The desktop auto-updater verifies signatures to ensure update integrity:

- The public key in `src-tauri/tauri.conf.json` (`plugins.updater.pubkey`) must match the private key used in CI
- Required GitHub secrets: `TAURI_SIGNING_PRIVATE_KEY` and `TAURI_SIGNING_PRIVATE_KEY_PASSWORD`
- Use `scripts/setup-github-secrets.sh` to set secrets from a local key file
- If desktop builds fail with `incorrect updater private key password`, rotate/update the keypair and secrets

## Verification checklist

After a release:

- [ ] Verify `deploy.yml` succeeded after merge to `main`
- [ ] Confirm the web footer version matches the release version
- [ ] Verify `build-desktop.yml` succeeded for both `macos-latest` and `windows-latest`
- [ ] Check that GitHub Release has both macOS and Windows installers
- [ ] Verify the desktop auto-updater picks up the new version

## Sample data

The project ships with sample Arduino UNO Gerber files for demo purposes. The "Try a Sample" button on the landing page loads these files so users can explore without importing their own data.
