---
title: Error Monitoring
description: Sentry integration for error reporting in web and desktop builds.
---

# Error Monitoring

Gerbtrace uses [Sentry](https://sentry.io) for error reporting and user feedback. The integration covers both the web app and the desktop app.

Organization: **newmatik** | Project: **gerbtrace**

## Web app

The web app uses `@sentry/nuxt`. Configuration is split across:

- `sentry.client.config.ts` – client-side Sentry init
- `sentry.server.config.ts` – server-side Sentry init
- `nuxt.config.ts` – module registration and `runtimeConfig.public.sentry`

Set `SENTRY_DSN` in the environment when building. Optionally set `SENTRY_AUTH_TOKEN` for source map uploads.

The deploy workflow (`.github/workflows/deploy.yml`) uses both secrets.

## Desktop app

The desktop app uses the `sentry` Rust crate with the **panic** feature so native Rust panics are captured and sent to Sentry.

The DSN is set at build time via the `SENTRY_DSN` environment variable. The binary reads it with `option_env!("SENTRY_DSN")` and falls back to `std::env::var("SENTRY_DSN")` at runtime.

The desktop build workflow (`.github/workflows/build-desktop.yml`) passes `SENTRY_DSN` from GitHub secrets to the Tauri build.

## User bug reports

Users can submit bug reports from two places:

- **Bug icon** in the app header
- **Settings > Report a bug**

Both open a modal where the user can enter an optional email and description. Submissions are sent as Sentry messages tagged with `type: user_report`.

## Setup

### Getting DSN and auth token

- **DSN**: Sentry project settings > Client Keys (DSN)
- **Auth token** (optional): Sentry settings > Auth Tokens. Create a token with `project:releases` scope.

### Setting GitHub secrets

Using the [GitHub CLI](https://cli.github.com/):

```bash
# Interactive setup
node scripts/set-sentry-secrets.mjs

# Or manually
echo -n "YOUR_SENTRY_DSN" | gh secret set SENTRY_DSN
echo -n "YOUR_SENTRY_AUTH_TOKEN" | gh secret set SENTRY_AUTH_TOKEN
```

Or set them in the GitHub UI: **Repo > Settings > Secrets and variables > Actions**.

### Re-running the Sentry wizard

The configuration is already in the repo, but to re-run or update:

```bash
npx @sentry/wizard@latest -i nuxt --saas --org newmatik --project gerbtrace
```
