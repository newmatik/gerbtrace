---
description: Prevent web app footer version drift vs repo/app config
alwaysApply: true
---

# Web version must match repo

Gerbtrace displays its web version from `nuxt.config.ts` (`runtimeConfig.public.appVersion`). This value must stay aligned with the repository version and the deployed artifact.

## When bumping a release version

- Update **both**:
  - `package.json` `version`
  - `nuxt.config.ts` `runtimeConfig.public.appVersion`
- Ensure the Cloudflare Workers deploy/build ran for the commit containing the bump.

## If production shows an old version

Do **not** assume the repo is wrong â€” first confirm what is deployed:

- Fetch `https://www.gerbtrace.com/index.html` and read `window.__NUXT__.config.public.appVersion`.
- If it's old, the Cloudflare Workers deployment contains an older build (or the edge cache is stale).
  - Purge the cache in the Cloudflare dashboard under **Caching > Configuration > Purge Everything**.
  - If still old after a purge, redeploy via Cloudflare Workers (trigger a new build from the latest `main` commit).
