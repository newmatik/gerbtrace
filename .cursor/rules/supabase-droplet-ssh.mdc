---
description: Supabase Cloud project details and how to apply migrations
globs: supabase/migrations/**/*.sql
alwaysApply: true
---

# Supabase Cloud Access

Production Supabase runs on **Supabase Cloud**, NOT on a self-hosted droplet.

## Project details

- **Project ID:** `gqrnlnlfidighosujpdb`
- **Region:** `eu-central-1`
- **Public endpoint:** `https://gqrnlnlfidighosujpdb.supabase.co` (direct Supabase Cloud URL)

## Applying migrations

After creating a new migration file, **always apply it immediately** using the Supabase MCP tools. Do not wait for CI — the local dev server connects to production Supabase.

Use the `apply_migration` MCP tool:

```
apply_migration(
  project_id: "gqrnlnlfidighosujpdb",
  name: "descriptive_snake_case_name",
  query: "<SQL>"
)
```

Or for ad-hoc queries, use `execute_sql`:

```
execute_sql(
  project_id: "gqrnlnlfidighosujpdb",
  query: "<SQL>"
)
```

## Verifying migrations

```
execute_sql(
  project_id: "gqrnlnlfidighosujpdb",
  query: "SELECT column_name FROM information_schema.columns WHERE table_schema='public' AND table_name='<table>' AND column_name='<column>';"
)
```

## Important

- **NEVER use SSH to the old droplet for database operations** — the droplet database is no longer production.
- Supabase Cloud auto-reloads the PostgREST schema cache after `apply_migration`.
- Follow the idempotency rules in `supabase-migration-safety.mdc`.
- The old droplet and nginx proxy are retired; use the Supabase Cloud URL directly.
